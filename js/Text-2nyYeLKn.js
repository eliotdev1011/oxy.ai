import{a6 as l,a7 as _,E as c,F as b,a8 as y,a9 as f}from"./index-Dg322SbI.js";(function(){try{var s=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new s.Error().stack;t&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[t]="b6e721bd-48e7-42d1-919b-ba8eeff7e2f1",s._sentryDebugIdIdentifier="sentry-dbid-b6e721bd-48e7-42d1-919b-ba8eeff7e2f1")}catch{}})();class x extends l{constructor(t,e){const{text:n,resolution:h,style:i,anchor:d,width:r,height:o,roundPixels:a,...u}=t;super({...u}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=e,this.text=n??"",this.style=i,this.resolution=h??null,this.allowChildren=!1,this._anchor=new _({_onUpdate:()=>{this.onViewUpdate()}}),d&&(this.anchor=d),this.roundPixels=a??!1,r!==void 0&&(this.width=r),o!==void 0&&(this.height=o)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}set text(t){t=t.toString(),this._text!==t&&(this._text=t,this.onViewUpdate())}get text(){return this._text}set resolution(t){this._autoResolution=t===null,this._resolution=t,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(t){var e;t=t||{},(e=this._style)==null||e.off("update",this.onViewUpdate,this),t instanceof this._styleClass?this._style=t:this._style=new this._styleClass(t),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get bounds(){return this._boundsDirty&&(this._updateBounds(),this._boundsDirty=!1),this._bounds}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(t){this._setWidth(t,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(t){this._setHeight(t,this.bounds.height)}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this.bounds.width,t.height=Math.abs(this.scale.y)*this.bounds.height,t}setSize(t,e){typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,this.bounds.width),e!==void 0&&this._setHeight(e,this.bounds.height)}addBounds(t){const e=this.bounds;t.addFrame(e.minX,e.minY,e.maxX,e.maxY)}containsPoint(t){const e=this.bounds.width,n=this.bounds.height,h=-e*this.anchor.x;let i=0;return t.x>=h&&t.x<=h+e&&(i=-n*this.anchor.y,t.y>=i&&t.y<=i+n)}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0,this._didTextUpdate=!0;const t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}_getKey(){return`${this.text}:${this._style.styleKey}:${this._resolution}`}destroy(t=!1){super.destroy(t),this.owner=null,this._bounds=null,this._anchor=null,(typeof t=="boolean"?t:t!=null&&t.style)&&this._style.destroy(t),this._style=null,this._text=null}}function w(s,t){let e=s[0]??{};return(typeof e=="string"||s[1])&&(c(b,`use new ${t}({ text: "hi!", style }) instead`),e={text:e,style:s[1]}),e}class g extends x{constructor(...t){const e=w(t,"Text");super(e,y),this.renderPipeId="text"}_updateBounds(){const t=this._bounds,e=this._anchor,n=f.measureText(this._text,this._style),{width:h,height:i}=n;t.minX=-e._x*h,t.maxX=t.minX+h,t.minY=-e._y*i,t.maxY=t.minY+i}}export{g as T};
